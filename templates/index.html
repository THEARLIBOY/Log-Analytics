<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Document metadata and external resources -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Log Analytics Dashboard</title>

    <!-- External CSS resources -->
    <!-- Google Fonts - Inter font family for modern, readable typography -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Feather Icons - Beautiful, customizable icons used throughout the interface -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.css" rel="stylesheet">
    <!-- Chart.js - For interactive data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Application-specific styles -->
    <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet">
</head>
<body>
    <!-- Header Section -->
    <!-- Contains application branding, title, and quick action buttons -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <!-- Logo and branding area -->
                <div class="logo">
                    <div class="logo-icon">üìä</div>
                    <div>
                        <div class="logo-text">Log Analytics</div>
                        <div class="logo-subtitle">Professional Log Analysis Tool</div>
                    </div>
                </div>
                <!-- Header actions for quick access to common functions -->
                <div class="header-actions">
                    <!-- Dark mode toggle button -->
                    <button class="btn btn-secondary" onclick="toggleDarkMode()" id="darkModeToggle">
                        <i data-feather="sun" id="themeIcon"></i>
                        <span id="themeText">Light Mode</span>
                    </button>
                    <!-- Button to load sample data for demonstration purposes -->
                    <button class="btn btn-secondary" onclick="showSample()">
                        <i data-feather="eye"></i>
                        View Sample
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Upload Section -->
            <!-- Primary interface for log file upload and text input -->
            <div class="upload-section fade-in">
                <!-- Section header with title and description -->
                <h1 class="section-title">
                    <i data-feather="upload-cloud"></i>
                    Analyze Your Logs
                </h1>
                <p class="section-subtitle">
                    Upload a log file or paste log content to get instant insights and analysis
                </p>

                <!-- Enhanced File Upload Area -->
                <!-- Modern drag and drop zone with improved visual feedback -->
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <i data-feather="file-text"></i>
                    </div>
                    <div class="upload-text">Drop your log file here</div>
                    <div class="upload-hint">
                        <i data-feather="info"></i>
                        Supports .log, .txt files up to 50MB
                    </div>
                    <!-- Hidden file input element for security and compatibility -->
                    <input type="file" class="file-input" id="fileInput" accept=".log,.txt">
                </div>

                <!-- Enhanced Text Input Section -->
                <div class="text-input-section">
                    <div class="input-toggle" id="textInputToggle" onclick="toggleTextInput()">
                        <i data-feather="edit-3"></i>
                        <span>Paste logs directly</span>
                        <i data-feather="chevron-down" class="toggle-arrow"></i>
                    </div>
                    <div class="textarea-container" id="textareaContainer">
                        <textarea
                            class="log-textarea"
                            id="logTextarea"
                            placeholder="Paste your log content here...&#10;&#10;Example:&#10;192.168.1.100 - - [10/Oct/2023:13:55:36] "GET /api/users HTTP/1.1" 200 1234&#10;192.168.1.101 - - [10/Oct/2023:13:55:37] "POST /api/login HTTP/1.1" 401 567"
                            spellcheck="false"
                            autocomplete="off"
                        ></textarea>
                        <div class="textarea-footer">
                            <span class="textarea-info">
                                <i data-feather="info"></i>
                                Supports web server logs, system logs, and custom formats
                            </span>
                            <span class="textarea-stats">
                                <span id="charCount">0</span> characters
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Redesigned Filter Section -->
                <div class="filter-section">
                    <div class="filter-toggle-container">
                        <button class="btn btn-secondary" onclick="toggleFilters()" id="filterToggle">
                            <i data-feather="filter"></i>
                            <span>Show Filters</span>
                        </button>
                    </div>

                    <div class="filters-panel" id="filtersPanel">
                        <div class="filters-header">
                            <h3 class="filters-title">
                                <i data-feather="filter"></i>
                                Advanced Filters
                            </h3>
                            <p class="filters-subtitle">
                                Refine your log analysis with precision filters. Select specific criteria to focus on the most relevant data for your investigation.
                            </p>
                        </div>

                        <div class="filters-grid">
                            <!-- Date Range Filter -->
                            <div class="filter-group">
                                <label class="filter-label" for="startDate">
                                    <i data-feather="calendar" class="filter-icon"></i>
                                    Date Range
                                </label>
                                <div class="date-inputs">
                                    <input type="datetime-local" class="filter-input" id="startDate" placeholder="Start Date">
                                    <span>to</span>
                                    <input type="datetime-local" class="filter-input" id="endDate" placeholder="End Date">
                                </div>
                            </div>

                            <!-- IP Address Filter -->
                            <div class="filter-group">
                                <label class="filter-label" for="ipFilter">
                                    <i data-feather="user" class="filter-icon"></i>
                                    IP Address
                                </label>
                                <div class="filter-input-wrapper">
                                    <input type="text" class="filter-input" id="ipFilter" placeholder="e.g., 192.168.1.100 or range">
                                    <i data-feather="user" class="filter-input-icon"></i>
                                </div>
                            </div>

                            <!-- HTTP Status Code Filter -->
                            <div class="filter-group">
                                <label class="filter-label" for="statusFilter">
                                    <i data-feather="hash" class="filter-icon"></i>
                                    HTTP Status
                                </label>
                                <div class="filter-input-wrapper">
                                    <select class="filter-input" id="statusFilter">
                                        <option value="">All Status Codes</option>
                                        <option value="200">‚úÖ 200 OK</option>
                                        <option value="201">‚úÖ 201 Created</option>
                                        <option value="204">‚úÖ 204 No Content</option>
                                        <option value="301">‚Ü©Ô∏è 301 Moved</option>
                                        <option value="400">‚ùå 400 Bad Request</option>
                                        <option value="401">üîí 401 Unauthorized</option>
                                        <option value="403">üö´ 403 Forbidden</option>
                                        <option value="404">‚ùì 404 Not Found</option>
                                        <option value="500">üí• 500 Server Error</option>
                                        <option value="502">üí• 502 Bad Gateway</option>
                                        <option value="503">üöß 503 Service Unavailable</option>
                                    </select>
                                    <i data-feather="chevron-down" class="filter-input-icon"></i>
                                </div>
                            </div>

                            <!-- URL/Path Filter -->
                            <div class="filter-group">
                                <label class="filter-label" for="urlFilter">
                                    <i data-feather="link" class="filter-icon"></i>
                                    URL/Path Pattern
                                </label>
                                <div class="filter-input-wrapper">
                                    <input type="text" class="filter-input" id="urlFilter" placeholder="e.g., /api/users, /admin/*">
                                    <i data-feather="link" class="filter-input-icon"></i>
                                </div>
                            </div>

                            <!-- Search Text Filter -->
                            <div class="filter-group">
                                <label class="filter-label" for="searchText">
                                    <i data-feather="search" class="filter-icon"></i>
                                    Search Keywords
                                </label>
                                <div class="filter-input-wrapper">
                                    <input type="text" class="filter-input" id="searchText" placeholder="error, login, timeout, etc.">
                                    <i data-feather="search" class="filter-input-icon"></i>
                                </div>
                            </div>

                            <!-- Log Level Filter (if applicable) -->
                            <div class="filter-group">
                                <label class="filter-label" for="logLevelFilter">
                                    <i data-feather="alert-circle" class="filter-icon"></i>
                                    Log Level
                                </label>
                                <div class="filter-input-wrapper">
                                    <select class="filter-input" id="logLevelFilter">
                                        <option value="">All Levels</option>
                                        <option value="ERROR">üî¥ ERROR</option>
                                        <option value="WARN">üü° WARNING</option>
                                        <option value="INFO">üîµ INFO</option>
                                        <option value="DEBUG">üü£ DEBUG</option>
                                        <option value="TRACE">‚ö™ TRACE</option>
                                    </select>
                                    <i data-feather="chevron-down" class="filter-input-icon"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Filter Actions -->
                        <div class="filter-actions">
                            <button class="btn btn-primary" onclick="applyFilters()">
                                <i data-feather="play-circle"></i>
                                Apply Filters
                            </button>
                            <button class="btn btn-secondary" onclick="clearFilters()">
                                <i data-feather="rotate-ccw"></i>
                                Reset All
                            </button>
                        </div>

                        <!-- Filter Summary/Preview -->
                        <div class="filter-summary" id="filterSummary">
                            <div class="filter-summary-title">
                                <i data-feather="tag"></i>
                                Active Filters
                            </div>
                            <div class="filter-summary-tags" id="filterTags">
                                <!-- Active filter tags will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="analyzeLogs()">
                        <i data-feather="play"></i>
                        Analyze Logs
                    </button>
                    <button class="btn btn-secondary" onclick="clearAll()">
                        <i data-feather="refresh-ccw"></i>
                        Clear
                    </button>
                </div>

                <!-- Progress Bar -->
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Loading State -->
            <!-- Visual feedback shown during log analysis processing -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <div>Analyzing your logs...</div>
                <div style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.5rem;">
                    This may take a few moments for large files
                </div>
            </div>

            <!-- Results Section -->
            <!-- Container for displaying analysis results and insights -->
            <div class="results-section" id="resultsSection">
                <!-- Section header for results display -->
                <h2 class="section-title">
                    <i data-feather="bar-chart-3"></i>
                    Analysis Results
                </h2>

                <!-- Grid layout for result cards populated by JavaScript -->
                <div class="results-grid" id="resultsGrid">
                    <!-- Results will be populated here -->
                </div>

                <!-- Charts Section -->
                <!-- Interactive data visualization for analysis results -->
                <div class="charts-section" id="chartsSection">
                    <h3 class="card-title">
                        <i data-feather="trending-up"></i>
                        Data Visualization
                    </h3>
                    <div class="charts-grid">
                        <!-- Status Code Distribution Chart -->
                        <div class="chart-container">
                            <h4 class="chart-title">HTTP Status Distribution</h4>
                            <canvas id="statusChart" width="400" height="300"></canvas>
                        </div>

                        <!-- Top IPs Chart -->
                        <div class="chart-container">
                            <h4 class="chart-title">Top IP Addresses</h4>
                            <canvas id="ipsChart" width="400" height="300"></canvas>
                        </div>

                        <!-- Timeline Chart -->
                        <div class="chart-container">
                            <h4 class="chart-title">Request Timeline</h4>
                            <canvas id="timelineChart" width="400" height="300"></canvas>
                        </div>

                        <!-- Error Rate Trend -->
                        <div class="chart-container">
                            <h4 class="chart-title">Error Rate Trend</h4>
                            <canvas id="errorChart" width="400" height="300"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Export Section -->
                <!-- Options for downloading analysis results in various formats -->
                <div class="export-section">
                    <h3 class="card-title">
                        <i data-feather="download"></i>
                        Export Results
                    </h3>
                    <div class="export-buttons">
                        <!-- Export to CSV format for spreadsheet analysis -->
                        <button class="btn btn-primary" onclick="exportResults('csv')">
                            <i data-feather="file"></i>
                            Download CSV
                        </button>
                        <!-- Export to plain text format for documentation -->
                        <button class="btn btn-secondary" onclick="exportResults('txt')">
                            <i data-feather="file-text"></i>
                            Download TXT
                        </button>
                        <!-- Export to JSON format for programmatic use -->
                        <button class="btn btn-secondary" onclick="exportResults('json')">
                            <i data-feather="code"></i>
                            Download JSON
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Section -->
    <!-- Application footer with author information and branding -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <!-- Contact and author information -->
                <div class="footer-info">
                    <div class="author-info">
                        <strong>Author:</strong> Rezaul Karim
                    </div>
                    <div class="email-info">
                        <strong>Email:</strong> <a href="mailto:work.rezaul@outlook.com">work.rezaul@outlook.com</a>
                    </div>
                </div>
                <!-- Company/brand information -->
                <div class="powered-by">
                    <strong>Powered By:</strong> REZ LAB
                </div>
            </div>
        </div>
    </footer>

    <!-- External JavaScript Libraries -->
    <!-- Feather Icons - Icon rendering library, must be loaded before application scripts -->
    <script src="https://unpkg.com/feather-icons"></script>
    <!-- Application JavaScript - Main client-side functionality -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
